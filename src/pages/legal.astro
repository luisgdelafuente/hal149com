---
import Layout from "../layouts/Layout.astro";
import { getLangFromUrl, useTranslations } from '../i18n/ui';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Try to load i18n content, fallback to original
let i18nContent;
try {
  i18nContent = await import(`../i18n/content/${lang}.json`);
} catch (error) {
  console.warn(`Could not load i18n content for ${lang}, using fallback`);
}

const legalContent = i18nContent?.default?.legal || {
  title: "Legal",
  subtitle: "Legal Information and Policies",
  description: "Important legal information about HAL149 services, privacy practices, and terms of use.",
  keywords: "HAL149, legal, privacy policy, terms of service, cookie policy, AI consulting legal information",
  author: "HAL149"
};

const currentContent = legalContent;
---

<Layout 
  title={`${currentContent.title} | HAL149`} 
  description={currentContent.description}
  keywords="HAL149, legal, privacy policy, terms of service, cookie policy, AI consulting legal information, data protection, GDPR compliance"
  author="HAL149"
  type="website"
>
  <div class="bs-container py-16">
    <div class="max-w-6xl mx-auto">
      <!-- Hero Header -->
      <div class="text-center mb-20">
        <h1 class="bs-h1 mb-6">{currentContent.title}</h1>
        <p class="bs-body-text xl:text-xl max-w-3xl mx-auto text-bs-foreground-dark mb-8">
          {currentContent.subtitle}
        </p>
      </div>

      <!-- Main Content Sections -->
      <div class="grid gap-16">
        <!-- Privacy Policy Section -->
        <div class="max-w-4xl mx-auto">
          <h2 class="text-3xl font-bold mb-8 text-bs-foreground-light">{currentContent.privacy_policy?.title || "Privacy Policy"}</h2>
          <div class="prose prose-lg max-w-none">
            <p class="bs-body-text text-bs-foreground-light leading-relaxed text-lg mb-6">
              {currentContent.privacy_policy?.content || "This Privacy Policy describes how HAL149 (\"we,\" \"us,\" or \"our\") collects, uses, and protects your personal information when you use our AI consulting services and visit our website."}
            </p>
          </div>
        </div>

        <!-- Terms of Service Section -->
        <div class="max-w-4xl mx-auto">
          <h2 class="text-3xl font-bold mb-8 text-bs-foreground-light">{currentContent.terms_of_service?.title || "Terms of Service"}</h2>
          <div class="prose prose-lg max-w-none">
            <p class="bs-body-text text-bs-foreground-light leading-relaxed text-lg mb-6">
              {currentContent.terms_of_service?.content || "These Terms of Service (\"Terms\") govern your use of HAL149's AI consulting services and website. By accessing or using our services, you agree to be bound by these Terms."}
            </p>
          </div>
        </div>

        <!-- Cookie Policy Section -->
        <div class="max-w-4xl mx-auto">
          <h2 class="text-3xl font-bold mb-8 text-bs-foreground-light">{currentContent.cookie_policy?.title || "Cookie Policy"}</h2>
          <div class="prose prose-lg max-w-none">
            <p class="bs-body-text text-bs-foreground-light leading-relaxed text-lg mb-6">
              {currentContent.cookie_policy?.content || "Our website uses cookies and similar technologies to enhance your browsing experience, analyze site traffic, and understand where our visitors are coming from."}
            </p>
          </div>
        </div>

        <!-- Call to Action Section -->
        <div class="text-center bg-gradient-to-r from-bs-primary to-bs-primary-dark rounded-2xl p-12 text-white">
          <h3 class="text-2xl md:text-3xl font-bold mb-4">
            {currentContent.cta_title || "Have Questions About Our Legal Policies?"}
          </h3>
          <p class="text-lg mb-8 opacity-90 max-w-2xl mx-auto">
            {currentContent.cta_content || "If you have any questions about our legal policies or need clarification on any terms, please don't hesitate to contact us."}
          </p>
          <button 
            type="button" 
            class="bs-btn" 
            onclick="demo.showModal()"
          >
            {currentContent.cta_button || "Contact Us"}
          </button>
        </div>
      </div>
    </div>
  </div>
</Layout>
