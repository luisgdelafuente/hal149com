---
import Layout from "../../layouts/Layout.astro";
import { getLangFromUrl, useTranslations } from '../../i18n/ui';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Try to load i18n content, fallback to original
let i18nContent;
try {
  i18nContent = await import(`../../i18n/content/${lang}.json`);
} catch (error) {
  console.warn(`Could not load i18n content for ${lang}, using fallback`);
}

const legalContent = i18nContent?.default?.legal || {
  title: "Legal",
  subtitle: "Información Legal y Políticas",
  description: "Información legal importante sobre los servicios de HAL149, prácticas de privacidad y términos de uso.",
  keywords: "HAL149, legal, política de privacidad, términos de servicio, política de cookies, información legal consultoría IA",
  author: "HAL149"
};

const currentContent = legalContent;
---

<Layout>
  <div class="bs-container py-16">
    <div class="max-w-6xl mx-auto">
      <!-- Hero Header -->
      <div class="text-center mb-20">
        <h1 class="bs-h1 mb-6">{currentContent.title}</h1>
        <p class="bs-body-text xl:text-xl max-w-3xl mx-auto text-bs-foreground-dark mb-8">
          {currentContent.subtitle}
        </p>
      </div>

      <!-- Main Content Sections -->
      <div class="grid gap-16">
        <!-- Privacy Policy Section -->
        <div class="max-w-4xl mx-auto">
          <h2 class="text-3xl font-bold mb-8 text-bs-foreground-light">{currentContent.privacy_policy?.title || "Política de Privacidad"}</h2>
          <div class="prose prose-lg max-w-none">
            <p class="bs-body-text text-bs-foreground-light leading-relaxed text-lg mb-6">
              {currentContent.privacy_policy?.content || "Esta Política de Privacidad describe cómo HAL149 (\"nosotros,\" \"nos,\" o \"nuestro\") recopila, utiliza y protege su información personal cuando utiliza nuestros servicios de consultoría en IA y visita nuestro sitio web."}
            </p>
          </div>
        </div>

        <!-- Terms of Service Section -->
        <div class="max-w-4xl mx-auto">
          <h2 class="text-3xl font-bold mb-8 text-bs-foreground-light">{currentContent.terms_of_service?.title || "Términos de Servicio"}</h2>
          <div class="prose prose-lg max-w-none">
            <p class="bs-body-text text-bs-foreground-light leading-relaxed text-lg mb-6">
              {currentContent.terms_of_service?.content || "Estos Términos de Servicio (\"Términos\") rigen su uso de los servicios de consultoría en IA de HAL149 y del sitio web. Al acceder o utilizar nuestros servicios, usted acepta estar sujeto a estos Términos."}
            </p>
          </div>
        </div>

        <!-- Cookie Policy Section -->
        <div class="max-w-4xl mx-auto">
          <h2 class="text-3xl font-bold mb-8 text-bs-foreground-light">{currentContent.cookie_policy?.title || "Política de Cookies"}</h2>
          <div class="prose prose-lg max-w-none">
            <p class="bs-body-text text-bs-foreground-light leading-relaxed text-lg mb-6">
              {currentContent.cookie_policy?.content || "Nuestro sitio web utiliza cookies y tecnologías similares para mejorar su experiencia de navegación, analizar el tráfico del sitio y entender de dónde vienen nuestros visitantes."}
            </p>
          </div>
        </div>

        <!-- Call to Action Section -->
        <div class="text-center bg-gradient-to-r from-bs-primary to-bs-primary-dark rounded-2xl p-12 text-white">
          <h3 class="text-2xl md:text-3xl font-bold mb-4">
            {currentContent.cta_title || "¿Tiene Preguntas Sobre Nuestras Políticas Legales?"}
          </h3>
          <p class="text-lg mb-8 opacity-90 max-w-2xl mx-auto">
            {currentContent.cta_content || "Si tiene alguna pregunta sobre nuestras políticas legales o necesita aclaración sobre cualquier término, no dude en contactarnos."}
          </p>
          <button 
            type="button" 
            class="bs-btn" 
            onclick="demo.showModal()"
          >
            {currentContent.cta_button || "Contáctenos"}
          </button>
        </div>
      </div>
    </div>
  </div>
</Layout>
